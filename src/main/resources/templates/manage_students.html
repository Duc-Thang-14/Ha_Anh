<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Quản lý Sinh viên</title>
  <!-- Thêm các thư viện CSS và JS cần thiết cho modal -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</head>
<body>

<h1>Quản lý Sinh viên</h1>

<!-- Thông báo -->
<p th:text="${message}"></p>

<!-- Nút thêm sinh viên -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addStudentModal">
  Thêm Sinh viên
</button>

<!-- Modal Thêm Sinh viên -->
<div class="modal fade" id="addStudentModal" tabindex="-1" aria-labelledby="addStudentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addStudentModalLabel">Thêm Sinh viên</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form action="/admin/add-student" method="POST">
        <div class="modal-body">
          <!-- Mã Sinh viên (Bắt buộc) -->
          <div class="mb-3">
            <label for="studentID" class="form-label">Mã Sinh viên</label>
            <input type="text" class="form-control" id="studentID" name="studentID" required placeholder="Nhập mã sinh viên">
          </div>

          <!-- Tên Sinh viên (Bắt buộc) -->
          <div class="mb-3">
            <label for="studentName" class="form-label">Tên Sinh viên</label>
            <input type="text" class="form-control" id="studentName" name="studentName" required placeholder="Nhập tên sinh viên">
          </div>

          <!-- Ngày sinh (Bắt buộc) -->
          <div class="mb-3">
            <label for="birthDate" class="form-label">Ngày sinh</label>
            <input type="date" class="form-control" id="birthDate" name="birthDate" required>
          </div>

          <!-- Giới tính (Bắt buộc) -->
          <div class="mb-3">
            <label for="gender" class="form-label">Giới tính</label>
            <select class="form-select" id="gender" name="gender" required>
              <option value="Nam">Nam</option>
              <option value="Nữ">Nữ</option>
              <option value="Khác">Khác</option>
            </select>
          </div>

          <!-- Địa chỉ (Bắt buộc) -->
          <div class="mb-3">
            <label for="address" class="form-label">Địa chỉ</label>
            <input type="text" class="form-control" id="address" name="address" required placeholder="Nhập địa chỉ sinh viên">
          </div>

          <!-- Số điện thoại (Không bắt buộc) -->
          <div class="mb-3">
            <label for="phoneNumber" class="form-label">Số điện thoại</label>
            <input type="tel" class="form-control" id="phoneNumber" name="phoneNumber" placeholder="Nhập số điện thoại">
          </div>

          <!-- Email (Không bắt buộc) -->
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Nhập email">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
          <button type="submit" class="btn btn-primary">Lưu</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Danh sách sinh viên -->
<table class="table">
  <thead>
  <tr>
    <th>Student ID</th>
    <th>Student Name</th>
    <th>Birth Date</th>
    <th>Gender</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="student : ${students}">
    <td th:text="${student.studentID}"></td>
    <td th:text="${student.studentName}"></td>
    <td th:text="${student.birthDate}"></td>
    <td th:text="${student.gender}"></td>
    <td>
      <!-- Sửa -->
      <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#editStudentModal" th:data-id="${student.studentID}">
        Sửa
      </button>

      <!-- Xóa -->
      <a href="#" th:href="@{/admin/delete-student/{id}(id=${student.studentID})}" class="btn btn-danger">
        Xóa
      </a>
    </td>
  </tr>
  </tbody>
</table>

<!-- Modal Sửa Sinh viên -->
<div class="modal fade" id="editStudentModal" tabindex="-1" aria-labelledby="editStudentModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editStudentModalLabel">Sửa Sinh viên</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form action="/admin/edit-student" method="POST">
        <div class="modal-body">
          <input type="hidden" id="editStudentID" name="studentID">
          <div class="mb-3">
            <label for="editStudentName" class="form-label">Tên Sinh viên</label>
            <input type="text" class="form-control" id="editStudentName" name="studentName" required>
          </div>
          <!-- Các trường khác -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
          <button type="submit" class="btn btn-primary">Lưu</button>
        </div>
      </form>
    </div>
  </div>
</div>

</body>
</html>
